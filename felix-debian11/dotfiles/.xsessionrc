#!/usr/bin/env bash

#######################
# Apply screen layout
#######################
if [[ -f "${HOME}/.screenlayout/MyScreenLayout.sh" ]];then
	bash "${HOME}/.screenlayout/MyScreenLayout.sh"
fi

######################
# Restore wallpapers
######################
nitrogen --restore

#########################
# Environment variables
#########################
export JDK_HOME=""
export JRE_HOME=""
if [[ ! -z "${JDK_HOME}" ]]; then
	export PATH="${JDK_HOME}/bin:${PATH}"
fi

export ANT_HOME=""
if [[ ! -z "${ANT_HOME}" ]]; then
	export PATH="${ANT_HOME}/bin:${PATH}"
fi

export MVN_HOME=""
if [[ ! -z "${MVN_HOME}" ]]; then
	export PATH="${MVN_HOME}/bin:${PATH}"
fi

export GPODDER_HOME=""
export GPODDER_DOWNLOAD_DIR=""

##################################
# Force loading of libgtk3-nocsd
##################################
export LD_PRELOAD="libgtk3-nocsd.so.0${LD_PRELOAD:+:$LD_PRELOAD}"

####################
# Bluetooth applet
####################
blueman-applet &

#################
# Hotkey daemon
#################
sxhkd &

########################################################################################
# Keyboard should be set properly in /etc/default/keyboard but could also be done here
########################################################################################
#setxkbmap -rules evdev -model evdev -layout us -variant altgr-intl &

###########
# Xmodmap
###########
if [[ -f "${HOME}/.Xmodmap" ]]; then
	xmodmap .Xmodmap
fi

##########
# Polkit
##########
/usr/lib/policykit-1-gnome/polkit-gnome-authentication-agent-1 &

################################
# SSH agent for X applications
################################
if [[ -d "${HOME}/.ssh" ]]; then
	HOME_LINK_SSH_AUTH_SOCK="${HOME}/.ssh/ssh_auth_sock"
	if [[ ! -S "${HOME_LINK_SSH_AUTH_SOCK}" ]]; then
		eval `ssh-agent`
		ln -sf "${SSH_AUTH_SOCK}" "${HOME_LINK_SSH_AUTH_SOCK}"
	fi
	export SSH_AUTH_SOCK="${HOME_LINK_SSH_AUTH_SOCK}"
	ssh-add -l > /dev/null || ssh-add
fi

#####################
# Clipboard Manager
#####################
parcellite --no-icon &

#################################################################################
# DPMS (Display Power Management Signaling) is controlled with the xset command
# See <https://wiki.archlinux.org/index.php/Display_Power_Management_Signaling>
#################################################################################

# Query the current settings
# xset q
#
# Disable screen saver blanking
# xset s off
#
# Change blank time to 1 hour
# xset s 3600 3600
#
# Turn off DPMS
# xset -dpms
#
# Disable DPMS and prevent screen from blanking
# xset s off -dpms
#
# Turn off screen immediately
# xset dpms force off
#
# Standy screen
# xset dpms force standy
#
# Suspend screen
# xset dpms force suspend
#
